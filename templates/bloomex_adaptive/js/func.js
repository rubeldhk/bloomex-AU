function changeStateList(state_list_name,element_country_id){var nSelectIndex,selected_country;element_country_id=element_country_id||"country_billing",state_list_name=state_list_name||"state_billing",selected_country="country_shipping"==element_country_id?"AUS":(nSelectIndex=document.getElementById(element_country_id).selectedIndex,document.getElementById(element_country_id).options[nSelectIndex].value),document.getElementById(state_list_name)||(state_list_name="state"),document.getElementById(state_list_name)&&changeDynaList2(state_list_name,eval(state_list_name),selected_country,"","")}function changeDynaList2(e,t,n,o,a){var r=document.getElementById(e);for(i in r.options.length)r.options[i]=null;for(x in i=0,s="",t)t[x][0]==n&&(opt=new Option,opt.value=t[x][1],opt.text=t[x][2],(o==n&&a==opt.value||0==i)&&(opt.selected=!0),r.options[i++]=opt);r.length=i}function getStateByPostalCode(e){const t={NW:{1e3:"1999",2e3:"2599",2619:"2899",2921:"2999"},AT:{"0200":"0299",2600:"2618",2900:"2920"},VI:{3e3:"3999",8e3:"8999"},QL:{4e3:"4999",9e3:"9999"},SA:{5e3:"5799",5800:"5999"},WA:{6e3:"6797",6800:"6999"},TA:{7e3:"7799",7800:"7999"},NT:{"0800":"0899","0900":"0999"}};for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];for(var a in o)if(o.hasOwnProperty(a)&&parseInt(a)<=parseInt(e)&&parseInt(e)<=parseInt(o[a]))return jQuery("div.calendar_wrapper").hasClass("showCalendar")&&selectDeliveryDateLight(),n}}function isMobile(){return window.innerWidth<=768}function validateOverlayForm(){const e=document.getElementById("first_name_capture").value.trim(),t=document.getElementById("email_capture").value.trim(),n=document.getElementById("phone_capture").value.trim(),o=document.getElementById("first_name_error"),a=document.getElementById("email_error"),r=document.getElementById("phone_error");o.textContent="",a.textContent="",r.textContent="";let i=!0;return""===e&&(o.textContent="Please enter your first name.",i=!1),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||(a.textContent="Please enter a valid email address.",i=!1),/^(\+1\s?)?(\d{3}[\s-]?)?\d{3}[\s-]?\d{4}$/.test(n)||(r.textContent="Please enter a valid phone number.",i=!1),i}function setOverlayCapture(){const e=document.getElementById("formCaptureButton");e.disabled=!0,e.innerText="Processing...";const t=$("#first_name_capture").val(),n=$("#email_capture").val(),o=$("#phone_capture").val(),a=$("#ip_address").val();if(!validateOverlayForm())return e.disabled=!1,e.innerText="GET MY 10%",!1;setInterval(checkActivity,6e4),jQuery.ajax({type:"POST",url:"/index.php?option=com_user&task=setOverlayCapture",data:{first_name:t,email:n,phone:o,ip_address:a},dataType:"json",success:function(e){var t=JSON.parse(e).message;const n=document.getElementById("modalOverlay");n.style.opacity="0",setTimeout((()=>n.style.visibility="hidden"),300);var o=document.getElementById("popup-message");o&&o.remove();var a=document.createElement("span");a.style.textTransform="uppercase",a.innerText=t;var r=document.getElementById("overlayClientPromotion");r.appendChild(a),r.removeAttribute("style"),setTimeout((()=>{r.style.visibility="hidden",r.style.opacity="0"}),3e3),document.cookie="closedOveralPopup="+Date.now()+"; path=/; secure"}})}function closeOverlayClientModal(){const e=document.getElementById("modalOverlay");e.style.opacity="0",e.style.visibility="hidden",document.cookie="closedOveralPopup="+Date.now()+"; path=/; secure",jQuery.ajax({type:"POST",url:"/index.php?option=com_user&task=closeOverlayCapture",success:function(e){setInterval(checkActivity,6e4)}})}function showClientOverlayCapture(){const e=document.getElementById("modalOverlay");e&&e.removeAttribute("style")}function startLoader(){jQuery("#ajaxloader").show()}function stopLoader(){jQuery("#ajaxloader").hide()}function checkFB(){startLoader(),FB.getLoginStatus((function(e){statusChangeCallback(e)}))}function statusChangeCallback(e){"connected"!==e.status?stopLoader():"connected"===e.status&&fb_auth(e)}function checkLoginState(e){}function fb_auth(e){FB.api("/me",(function(e){jQuery.ajax({type:"POST",dataType:"json",url:"/?option=com_new_social_login&social=Facebook&task=auth",data:{response:e},success:function(e){e.result?document.location.reload(!0):alert("Error."),stopLoader()}})}))}function checkTW(){startLoader(),jQuery.ajax({type:"POST",dataType:"json",url:"/?option=com_new_social_login&social=Twitter&task=get_token",success:function(e){e.result?location.href="https://api.twitter.com/oauth/authenticate?oauth_token="+e.oauth_token:alert("Error."),stopLoader()}})}function decodeJwtResponse(e){return e=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),e=decodeURIComponent(atob(e).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")),JSON.parse(e)}function AuthGP(e){startLoader(),e=decodeJwtResponse(e.credential).sub,jQuery.ajax({type:"POST",dataType:"json",url:"/?option=com_new_social_login&social=GooglePlus&task=auth",data:{social_user_id:e},success:function(e){e.result?document.location.reload(!0):alert("Error."),stopLoader()}})}var shoppingCartData=null;function setCart(e){shoppingCartData=e;var t="";jQuery.each(e.products,(function(e,n){t+='<div class="product">',t+='<div class="image">',t+='<img src="'+n.image+'" />',t+="</div>",t+='<div class="info">',t+='<div class="name">',"deluxe"==n.select_bouquet||"supersize"==n.select_bouquet||"petite"==n.select_bouquet?t+=n.name+" ("+n.select_bouquet+")":t+=n.name,t+="</div>",t+='<div class="price">',t+=n.quantity+" x <span>$"+n.price+"</span>",t+="</div>",t+="</div>",t+="</div>",t+="<hr/>"})),0==e.cart_total?$(".top_progress").hide():($(".top_progress").show(),"undefined"!=typeof freeShippingPrice&&e.cart_price<parseFloat(freeShippingPrice)?($("#freeShippingProgressBar").progressbar({value:e.cart_price/parseFloat(freeShippingPrice)*100}),$(".spend_more_price").html("<span class='text-info'>Spend <b>$"+parseFloat(freeShippingPrice-e.cart_price).toFixed(2)+"</b> more for Free Delivery!</span>")):($("#freeShippingProgressBar").progressbar({value:100}),$(".spend_more_price").html("<span class='text-success'><b>Congratulations!</b> You've got Free Delivery!</span"))),0<e.cart_items?jQuery(".yellow_cart_items").text(e.cart_items):jQuery(".yellow_cart_items").text(""),jQuery("div.hover_cart_wrapper .hover_cart_inner .products").html(t),jQuery("div.hover_cart_wrapper .hover_cart_inner .total span").html("$"+e.cart_price),jQuery("div.top_cart div.title div.info").text(e.cart_items+" Items - $"+e.cart_price),jQuery("tr.subtotal span.corporate_discount").text("$"+e.corporate_discount),jQuery("tr.subtotal span.cart_total").text("$"+e.cart_total),jQuery("tr.subtotal span.cart_subtotal").text("$"+e.cart_price),0<e.coupon_discount?($(".basket_coupon").show(),$(".basket_coupon .basket_coupon_discount").html("$"+e.coupon_discount)):$(".basket_coupon").hide()}function loadCart(){jQuery.ajax({type:"POST",url:"/?option=com_ajaxorder&task=CartAction",data:{action:"GetCart"},dataType:"json",success:function(e){setCart(e)}})}function b64EncodeUnicode(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)})))}function countdownPromotion(e,t){var n=new Date(e+" 23:59:59").getTime(),o=setInterval((function(){var e=(new Date).getTime(),a=n-e,r=Math.floor(a/864e5),i=Math.floor(a%864e5/36e5),s=Math.floor(a%36e5/6e4);e=Math.floor(a%6e4/1e3),$(".promotion_product_"+t).html((0<r?r+"d ":"")+(0<i?i+"h ":"")+s+"m "+e+"s"),a<0&&(clearInterval(o),$(".promotion_product_"+t).html("TIME UP!!")),$(".promotion_product").show()}),1e3)}if(window.fbAsyncInit=function(){FB.init({appId:"1302380213239921",cookie:!0,xfbml:!0,version:"v19.0"}),FB.AppEvents.logPageView()},loadCart(),"true"!==document.cookie.replace(/(?:(?:^|.*;\s*)MobileSaveBannerShown\s*\=\s*([^;]*).*$)|^.*$/,"$1")&&!(window.location.href.indexOf("checkout")>-1||window.location.href.indexOf("Checkout")>-1||window.location.href.indexOf("cart")>-1||window.location.href.indexOf("order")>-1)){var date=new Date;document.cookie="MobileSaveBannerShown=true; expires="+date.toGMTString(date.setDate(date.getDate()+7))+"; path=/; domain="+window.location.hostname+"; Secure; SameSite=Strict",jQuery(window).on("load",(function(){jQuery(window).width()<481&&jQuery(".mobile_popup").animate({top:0},500)}))}document.addEventListener("DOMContentLoaded",(function(){let e=document.getElementById("showMoreAddresses"),t=document.getElementById("hideMoreAddresses"),n=document.querySelectorAll(".hidden-address");e&&t&&(e.addEventListener("click",(function(){n.forEach((e=>e.style.display="flex")),e.style.display="none",t.style.display="inline-block"})),t.addEventListener("click",(function(){n.forEach((e=>e.style.display="none")),t.style.display="none",e.style.display="inline-block"})))})),document.addEventListener("DOMContentLoaded",(function(){let e=document.querySelectorAll(".address-item"),t=document.getElementById("selected_user_info_id"),n=document.querySelector("select[name='shipping_info_state']");document.getElementById("googleaddressupdate_shipping"),e.forEach((e=>{e.addEventListener("click",(function(){jQuery("#delivery_date_2").val("");let e=this.querySelector("input[type='radio']");if(e){e.checked=!0;let o=this.getAttribute("data-user-info-id");t.value=o,sessionStorage.setItem("selected_user_info_id",o);let a=this.querySelector(".address-content").innerHTML.split("<br>"),r="",i=(a.length>2?a[2].trim():"").split(",");3===i.length&&(r=i[1].trim());for(let e of n.options)if(e.value.trim()===r){e.selected=!0;break}}}))})),function(){let e=sessionStorage.getItem("selected_user_info_id");if(e){let t=document.querySelector(`.address-item[data-user-info-id="${e}"]`);t&&t.click()}}()})),document.addEventListener("DOMContentLoaded",(function(){var e,t=n();function n(){return t=parseInt(localStorage.getItem("timeSpentOnSite")),t=isNaN(t)?0:t}e=Date.now(),setInterval((function(){t=n()+(Date.now()-e),localStorage.setItem("timeSpentOnSite",t),e=parseInt(Date.now())}),1e3)}));